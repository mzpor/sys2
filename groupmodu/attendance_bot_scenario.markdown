# سناریو ربات مدیریت گروه و حضور و غیاب

## معرفی
این ربات برای مدیریت گروه‌های آموزشی قرآن و ثبت حضور و غیاب قرآن‌آموزان طراحی شده است. سیستم دارای سطوح دسترسی مختلف برای مدیر، مربیان و قرآن‌آموزان است و امکان مدیریت چندین گروه به صورت همزمان را فراهم می‌کند.

## ویژگی‌های اصلی

### مدیریت گروه
- **مشاهده لیست گروه‌ها**: مدیر می‌تواند تمام گروه‌ها را مشاهده کند و مربیان فقط گروه‌های خود را می‌بینند.
- **مشاهده اعضای گروه**: نمایش لیست کامل اعضای هر گروه با تفکیک مدیران، مربیان و قرآن‌آموزان.
- **مدیریت مربیان**: مدیر می‌تواند لیست مربیان را مشاهده کند و گروه‌های هر مربی را ببیند.
- **ثبت خودکار اعضا**: با اضافه شدن ربات به گروه، اعضای گروه به صورت خودکار ثبت می‌شوند.

### سیستم حضور و غیاب
- **ثبت حضور و غیاب عمومی**: امکان ثبت وضعیت حضور و غیاب برای تمام قرآن‌آموزان.
- **ثبت حضور و غیاب گروهی**: امکان ثبت وضعیت حضور و غیاب به تفکیک گروه‌ها.
- **ثبت سریع**: امکان ثبت سریع وضعیت حضور و غیاب با یک کلیک.
- **وضعیت‌های مختلف**: پشتیبانی از وضعیت‌های مختلف شامل حاضر، حضور با تاخیر، غایب، غیبت موجه و در انتظار.
- **آمار حضور و غیاب**: نمایش آمار کلی و جزئی از وضعیت حضور و غیاب قرآن‌آموزان.

### رابط کاربری
- **منوی اصلی**: منوی اصلی با دسترسی‌های متفاوت برای مدیر و مربیان.
- **کیبورد اینلاین**: استفاده از کیبورد اینلاین برای سهولت کار با ربات.
- **پیام‌های شخصی‌سازی شده**: نمایش پیام‌های متفاوت بر اساس نقش کاربر (مدیر، مربی یا قرآن‌آموز).
- **نمایش تاریخ شمسی**: نمایش تاریخ به صورت شمسی در تمام بخش‌های ربات.

## سطوح دسترسی

### مدیر
- دسترسی به تمام گروه‌ها و مربیان
- مشاهده و مدیریت تمام گروه‌ها
- مشاهده لیست مربیان و گروه‌های هر مربی
- ثبت حضور و غیاب در تمام گروه‌ها
- پاک کردن داده‌های حضور و غیاب

### مربی
- دسترسی به گروه‌های خود
- مشاهده اعضای گروه‌های خود
- ثبت حضور و غیاب در گروه‌های خود
- مشاهده آمار حضور و غیاب گروه‌های خود

### قرآن‌آموز
- مشاهده راهنمای استفاده از ربات
- ثبت نام در گروه با دستور /عضو

## جریان کار

### شروع کار با ربات
1. ربات به گروه اضافه می‌شود و پیام خوش‌آمدگویی ارسال می‌کند.
2. ربات به صورت خودکار اعضای گروه را ثبت می‌کند.
3. مدیر یا مربی می‌تواند با ارسال دستور /عضو یا /group در چت خصوصی، لیست گروه‌ها را مشاهده کند.

### مدیریت گروه
1. مدیر یا مربی گروه مورد نظر را انتخاب می‌کند.
2. منوی گروه نمایش داده می‌شود که شامل گزینه‌های مشاهده اعضا، مشاهده حضور و غیاب و ثبت سریع حضور و غیاب است.
3. با انتخاب گزینه مشاهده اعضا، لیست کامل اعضای گروه با تفکیک مدیران، مربیان و قرآن‌آموزان نمایش داده می‌شود.

### ثبت حضور و غیاب
1. مدیر یا مربی گزینه ثبت سریع حضور و غیاب را انتخاب می‌کند.
2. لیست قرآن‌آموزان با وضعیت فعلی آن‌ها نمایش داده می‌شود.
3. با کلیک روی نام هر قرآن‌آموز، منوی انتخاب وضعیت نمایش داده می‌شود.
4. مدیر یا مربی وضعیت جدید را انتخاب می‌کند (حاضر، حضور با تاخیر، غایب، غیبت موجه).
5. وضعیت قرآن‌آموز به روز می‌شود و در دیکشنری مربوطه ذخیره می‌شود.
6. اگر ثبت حضور و غیاب در یک گروه خاص انجام شود، وضعیت در دیکشنری مخصوص آن گروه نیز ذخیره می‌شود.

### مشاهده آمار
1. مدیر یا مربی گزینه مشاهده حضور و غیاب را انتخاب می‌کند.
2. لیست کامل قرآن‌آموزان با وضعیت حضور و غیاب آن‌ها نمایش داده می‌شود.
3. در انتهای لیست، آمار کلی شامل تعداد حاضر، تاخیر، غایب، غیبت موجه و در انتظار نمایش داده می‌شود.

## ساختار پروژه

### ماژول‌ها
- **ماژول اصلی (main.py)**: راه‌اندازی ربات و مدیریت آپدیت‌ها
- **ماژول حضور و غیاب (attendance.py)**: مدیریت حضور و غیاب قرآن‌آموزان
- **ماژول مدیریت گروه (group_management.py)**: مدیریت گروه‌ها، مربیان و اعضا

### فایل‌های پیکربندی
- **config.py**: تنظیمات ربات شامل توکن، لیست کاربران مجاز و مدیر

## نکات فنی
- استفاده از API بله برای ارتباط با سرور
- ذخیره‌سازی داده‌ها در دیکشنری‌های پایتون
- استفاده از کیبورد اینلاین برای تعامل با کاربر
- پشتیبانی از تاریخ شمسی با استفاده از کتابخانه jdatetime
- مدیریت سطوح دسترسی بر اساس user_id کاربران

## توسعه‌های آینده
- افزودن امکان ذخیره‌سازی داده‌ها در پایگاه داده
- افزودن امکان گزارش‌گیری پیشرفته
- افزودن امکان ارسال پیام به قرآن‌آموزان غایب
- افزودن امکان تعریف کلاس‌های درسی و برنامه زمانی
- افزودن امکان ثبت نمرات و پیشرفت قرآن‌آموزان