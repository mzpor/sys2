# ๐ ุฑุงูููุง ูุงฺูู ุซุจุชโูุงู (Registration Module)

## ๐ฏ ูุฏู
ูุงฺูู ุซุจุชโูุงู ุจุฑุง ูุฏุฑุช ูุฑุขูุฏ ุซุจุชโูุงู ฺฉุงุฑุจุฑุงู ุบุฑ ูุฏุฑ/ูุฑุจ/ฺฉูฺฉ ูุฑุจ ุฏุฑ ูุฏุฑุณู ุชูุงูุช ุทุฑุงุญ ุดุฏู ุงุณุช.

## ๐ง ูฺฺฏโูุง

### ๐ฅ ูุฏุฑุช ููุดโูุง
- **ูุฏุฑุงู**: ุฏุณุชุฑุณ ฺฉุงูู ุจู ูพูู ูุฏุฑุช
- **ูุฑุจุงู**: ุฏุณุชุฑุณ ุจู ูพูู ูุฑุจ
- **ฺฉูฺฉ ูุฑุจุงู**: ุฏุณุชุฑุณ ุจู ูพูู ฺฉูฺฉ ูุฑุจ
- **ูุฑุขูโุขููุฒุงู**: ุฏุณุชุฑุณ ุจู ูพูู ูุฑุขูโุขููุฒ ู ุซุจุชโูุงู

### ๐ ูุฑุขูุฏ ุซุจุชโูุงู
1. **ูุงู ู ูุงู ุฎุงููุงุฏฺฏ**: ูุฑูุฏ ูุงู ฺฉุงูู
2. **ฺฉุฏ ูู**: ูุฑูุฏ ฺฉุฏ ูู ฑฐ ุฑูู
3. **ุดูุงุฑู ุชููู**: ุงุฑุณุงู ุดูุงุฑู ุชููู ุงุฒ ุทุฑู ุฏฺฉูู
4. **ุชุฃุฏ ููุง**: ุจุฑุฑุณ ู ุชุฃุฏ ุงุทูุงุนุงุช

### ๐๏ธ ฺฉุจูุฑุฏูุง
- **ฺฉุจูุฑุฏ ูุนููู**: ุจุฑุง ุฏฺฉููโูุง ุงุตู
- **ฺฉุจูุฑุฏ ุดุดูโุง**: ุจุฑุง ุฏฺฉููโูุง ุนููุงุช
- **ฺฉุจูุฑุฏ ุชูุงุณ**: ุจุฑุง ุงุฑุณุงู ุดูุงุฑู ุชููู

## ๐ ูุงูโูุง ูุฑุชุจุท

### `registration_module.py`
ูุงฺูู ุงุตู ุซุจุชโูุงู ฺฉู ุดุงูู:
- ฺฉูุงุณ `RegistrationModule`
- ูุฏุฑุช ูพุงูโูุง ู callback ูุง
- ุฐุฎุฑู ู ุจุงุฑฺฏุฐุงุฑ ุฏุงุฏูโูุง
- ุงุนุชุจุงุฑุณูุฌ ุงุทูุงุนุงุช

### `registration_data.json`
ูุงู ุฐุฎุฑู ุฏุงุฏูโูุง ุซุจุชโูุงู ฺฉุงุฑุจุฑุงู

## ๐ ุฌุฑุงู ฺฉุงุฑ

### ุจุฑุง ฺฉุงุฑุจุฑุงู ุบุฑ ูุฏุฑ/ูุฑุจ/ฺฉูฺฉ ูุฑุจ:

#### 1๏ธโฃ ุดุฑูุน (`/start`)
```
๐ ุฎูุด ุขูุฏุฏ! ุจู ูุฏุฑุณู ุชูุงูุช ุฎูุด ุขูุฏุฏ!

[ุดุฑูุน ูุฌุฏุฏ] [ูุนุฑู ูุฏุฑุณู] [ุฎุฑูุฌ]
[ุซุจุชโูุงู]
```

#### 2๏ธโฃ ูุนุฑู ูุฏุฑุณู
```
๐ซ ูุนุฑู ูุฏุฑุณู ุชูุงูุช

ูุฏุฑุณู ุชูุงูุช ุจุง ุจุด ุงุฒ ฑฐ ุณุงู ุณุงุจูู...

[๐ ุซุจุชโูุงู]
```

#### 3๏ธโฃ ูุฑุขูุฏ ุซุจุชโูุงู
```
ูุทูุงู ูุงู ู ูุงู ุฎุงููุงุฏฺฏ ุฎูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ (ูุซุงู: ุนู ุฑุถุง).

[ุดุฑูุน ูุฌุฏุฏ] [ุฎุฑูุฌ] [ุจุฑฺฏุดุช ุจู ูุจู]
```

#### 4๏ธโฃ ุชุฃุฏ ููุง
```
๐ ุนู ุนุฒุฒุ ุญุณุงุจ ฺฉุงุฑุจุฑ ุดูุง:
ูุงู: ุนู ุฑุถุง
ฺฉุฏ ูู: 1234567890
ุชููู: +989123456789

[โ ุชุฃุฏ ููุง] [โ๏ธ ุชุตุญุญ ุงุทูุงุนุงุช]
```

### ุจุฑุง ฺฉุงุฑุจุฑุงู ุซุจุชโูุงู ุดุฏู:
```
๐ ุนู ุนุฒุฒุ ุฎูุด ุขูุฏ!
ุญุณุงุจ ฺฉุงุฑุจุฑ ุดูุง ุขูุงุฏู ุงุณุช ๐
ูุงู: ุนู ุฑุถุง
ฺฉุฏ ูู: 1234567890
ุชููู: +989123456789

[โ๏ธ ุชุตุญุญ ุงุทูุงุนุงุช] [๐ ูพูู ูุฑุขูโุขููุฒ]
```

## ๐๏ธ API ูุง

### ูุชุฏูุง ุงุตู

#### `handle_message(message: Dict)`
ูพุฑุฏุงุฒุด ูพุงูโูุง ูุชู ุงุฒ ฺฉุงุฑุจุฑุงู

#### `handle_callback(callback: Dict)`
ูพุฑุฏุงุฒุด callback query ูุง

#### `is_admin_or_teacher(user_id: int) -> bool`
ุจุฑุฑุณ ุงูฺฉู ุขุง ฺฉุงุฑุจุฑ ูุฏุฑ ุง ูุฑุจ ุงุณุช

#### `is_user_registered(user_id: str) -> bool`
ุจุฑุฑุณ ุงูฺฉู ุขุง ฺฉุงุฑุจุฑ ุซุจุชโูุงู ฺฉุฑุฏู ุงุณุช

#### `get_user_role(user_id: int) -> str`
ุฏุฑุงูุช ููุด ฺฉุงุฑุจุฑ (ูุฏุฑ/ูุฑุจ/ฺฉูฺฉ ูุฑุจ/ูุฑุขูโุขููุฒ)

### ูุชุฏูุง ฺฉูฺฉ

#### `build_reply_keyboard(buttons: List[List[str]]) -> Dict`
ุณุงุฎุช ฺฉุจูุฑุฏ ูุนููู

#### `build_inline_keyboard(buttons: List[List[Dict]]) -> Dict`
ุณุงุฎุช ฺฉุจูุฑุฏ ุดุดูโุง

#### `is_valid_national_id(nid: str) -> bool`
ุงุนุชุจุงุฑุณูุฌ ฺฉุฏ ูู

## ๐ ุงุชุตุงู ุจู ุณุณุชู ุงุตู

### ุฏุฑ `main.py`:
```python
from registration_module import RegistrationModule

class AttendanceBot:
    def __init__(self):
        self.registration_module = RegistrationModule()
        # ...

    def process_update(self, update):
        # ุจุฑุฑุณ ุงูููุช registration_module
        if hasattr(self.registration_module, 'user_states') and str(user_id) in self.registration_module.user_states:
            self.registration_module.handle_message(message)
        # ...
```

## ๐ ุขูุงุฑ ู ฺฏุฒุงุฑุดโฺฏุฑ

### `get_registered_users_count() -> int`
ุฏุฑุงูุช ุชุนุฏุงุฏ ฺฉุงุฑุจุฑุงู ุซุจุชโูุงู ุดุฏู

### `get_all_users_count() -> int`
ุฏุฑุงูุช ุชุนุฏุงุฏ ฺฉู ฺฉุงุฑุจุฑุงู

### `export_user_data(user_id: str) -> Optional[Dict]`
ุตุงุฏุฑุงุช ุงุทูุงุนุงุช ฺฉุงุฑุจุฑ

## ๐งช ุชุณุช

### ุงุฌุฑุง ุชุณุช:
```bash
python test_registration.py
```

### ุชุณุชโูุง ููุฌูุฏ:
- ุจุฑุฑุณ ููุด ฺฉุงุฑุจุฑุงู
- ุงุนุชุจุงุฑุณูุฌ ฺฉุฏ ูู
- ุณุงุฎุช ฺฉุจูุฑุฏูุง
- ุจุฑุฑุณ ุซุจุชโูุงู ฺฉุงุฑุจุฑุงู

## โ๏ธ ุชูุธูุงุช

### ุฏุฑ `config.py`:
```python
ADMIN_USER_IDS = [1114227010, 1775811194]
AUTHORIZED_USER_IDS = [574330749, 1114227010, 1775811194]
HELPER_COACH_USER_IDS = [2045777722]
```

## ๐ ูุญูู ุงุณุชูุงุฏู

1. **ุดุฑูุน ุฑุจุงุช**: `python main.py`
2. **ุงุฑุณุงู `/start`**: ุจุฑุง ุดุฑูุน ูุฑุขูุฏ
3. **ุงูุชุฎุงุจ "ุซุจุชโูุงู"**: ุจุฑุง ุดุฑูุน ุซุจุชโูุงู
4. **ุชฺฉูู ุงุทูุงุนุงุช**: ูุงูุ ฺฉุฏ ููุ ุดูุงุฑู ุชููู
5. **ุชุฃุฏ ููุง**: ุชฺฉูู ุซุจุชโูุงู

## ๐ง ุนุจโุงุจ

### ูุดฺฉูุงุช ุฑุงุฌ:

#### ุฎุทุง ุจุงุฑฺฏุฐุงุฑ config:
```
Error loading config: [Errno 2] No such file or directory: 'config.py'
```
**ุฑุงู ุญู**: ุงุทููุงู ุงุฒ ูุฌูุฏ ูุงู `config.py`

#### ุฎุทุง ุฐุฎุฑู ุฏุงุฏู:
```
Error saving registration data: [Errno 13] Permission denied
```
**ุฑุงู ุญู**: ุจุฑุฑุณ ูุฌูุฒูุง ููุดุชู ุฏุฑ ูพูุดู

#### ุฎุทุง API ุชูฺฏุฑุงู:
```
Telegram API error: Bot was blocked by the user
```
**ุฑุงู ุญู**: ฺฉุงุฑุจุฑ ุฑุจุงุช ุฑุง ุจูุงฺฉ ฺฉุฑุฏู ุงุณุช

## ๐ ูฺฉุงุช ููู

1. **ุงูููุช ูพุฑุฏุงุฒุด**: registration_module ุงูููุช ุจุงูุงุชุฑ ุฏุงุฑุฏ
2. **ุฐุฎุฑู ุฏุงุฏู**: ุงุทูุงุนุงุช ุฏุฑ `registration_data.json` ุฐุฎุฑู ูโุดูุฏ
3. **ุงุนุชุจุงุฑุณูุฌ**: ฺฉุฏ ูู ุจุงุฏ ุฏููุงู ฑฐ ุฑูู ุจุงุดุฏ
4. **ููุดโูุง**: ุจุฑ ุงุณุงุณ `config.py` ุชุนู ูโุดููุฏ
5. **ฺฉุจูุฑุฏูุง**: ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุณุงุฎุชู ูโุดููุฏ

## ๐ ุจูโุฑูุฒุฑุณุงูโูุง ุขูุฏู

- [ ] ุงุถุงูู ฺฉุฑุฏู ุชุฃุฏ ุงูู
- [ ] ูพุดุชุจุงู ุงุฒ ุขูพููุฏ ุนฺฉุณ ูพุฑููุงู
- [ ] ุณุณุชู ฺฉุฏ ุชุฃุฏ SMS
- [ ] ฺฏุฒุงุฑุดโฺฏุฑ ูพุดุฑูุชู
- [ ] ุงุชุตุงู ุจู ูพุงฺฏุงู ุฏุงุฏู 