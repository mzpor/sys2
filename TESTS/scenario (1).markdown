# سناریو ربات ثبت‌نام بله (اصلاح‌شده)

## مرحله ۱: شروع
- کاربر `/start` را وارد می‌کند.
- پیام:  
  _🌟 خوش آمدید! به ربات ثبت‌نام آموزشگاه خوش آمدید!_  
- کیبورد معمولی:  
  ```
  [شروع ثبت‌نام] [معرفی آموزشگاه] [خروج]
  ```
- کیبورد شیشه‌ای:  
  ```
  [[{text: "📝 شروع ثبت‌نام", callback_data: "start_registration"}]]
  ```

## مرحله ۲: دریافت نام و نام خانوادگی
- کاربر "شروع ثبت‌نام" را انتخاب می‌کند.
- پیام:  
  _لطفاً نام و نام خانوادگی خود را وارد کنید (مثال: علی رضایی)._  
- کاربر نام را وارد می‌کند (مثل: علی رضایی).
- ذخیره در JSON: `{"full_name": "علی رضایی", "first_name": "علی"}`.
- پیام:  
  _علی عزیز،  
  نام شما: علی رضایی  
  کد ملی: هنوز مانده  
  تلفن: هنوز مانده_  
- کیبورد معمولی:  
  ```
  [شروع ثبت‌نام] [خروج] [برگشت به قبل]
  ```
- کیبورد شیشه‌ای:  
  ```
  [[{text: "✏️ تصحیح نام", callback_data: "edit_name"}, {text: "📍 وارد کردن کد ملی", callback_data: "enter_national_id"}]]
  ```

## مرحله ۳: دریافت کد ملی
- کاربر "وارد کردن کد ملی" را انتخاب می‌کند.
- پیام:  
  _علی عزیز، لطفاً کد ملی ۱۰ رقمی خود را وارد کنید._  
- کاربر کد ملی را وارد می‌کند (مثل: 1234567890).
- بررسی: اگر ۱۰ رقم نباشد، خطا: _کد ملی نامعتبر است. دوباره وارد کنید._  
- ذخیره در JSON: `{"full_name": "علی رضایی", "first_name": "علی", "national_id": "1234567890"}`.
- پیام:  
  _علی عزیز،  
  نام شما: علی رضایی  
  کد ملی: 1234567890  
  تلفن: هنوز مانده_  
- کیبورد معمولی:  
  ```
  [شروع ثبت‌نام] [خروج] [برگشت به قبل]
  ```
- کیبورد شیشه‌ای:  
  ```
  [[{text: "✏️ تصحیح کد ملی", callback_data: "edit_national_id"}, {text: "📱 ارسال تلفن", callback_data: "send_phone"}]]
  ```

## مرحله ۴: دریافت شماره تلفن
- کاربر "ارسال تلفن" را انتخاب می‌کند.
- پیام:  
  _علی عزیز، لطفاً برای ارسال شماره تلفن خود روی دکمه زیر بزنید._  
- کیبورد شیشه‌ای:  
  ```
  [[{text: "📱 ارسال شماره تلفن", request_contact: true}]]
  ```
- کاربر دکمه را می‌زند و شماره تلفن با فرمت `+989123456789` ارسال می‌شود.
- بررسی: اگر با `+98` شروع نشود یا ۱۳ کاراکتر نباشد، خطا: _شماره تلفن نامعتبر است. دوباره امتحان کنید._  
- ذخیره در JSON: `{"full_name": "علی رضایی", "first_name": "علی", "national_id": "1234567890", "phone": "+989123456789"}`.

## مرحله ۵: تأیید نهایی
- پیام:  
  _📋 علی عزیز، حساب کاربری شما:  
  نام: علی رضایی  
  کد ملی: 1234567890  
  تلفن: +989123456789  
  آیا اطلاعات درست است؟_  
- کیبورد معمولی:  
  ```
  [شروع ثبت‌نام] [خروج] [برگشت به قبل]
  ```
- کیبورد شیشه‌ای:  
  ```
  [[{text: "✅ تأیید نهایی", callback_data: "final_confirm"}, {text: "✏️ تصحیح اطلاعات", callback_data: "edit_info"}]]
  ```
- پس از "تأیید نهایی":  
  _🎉 علی عزیز، ثبت‌نام شما با موفقیت تکمیل شد! موفق باشید!_  
- پس از "تصحیح اطلاعات": JSON پاک شده و بازگشت به مرحله ۲.

## دستورالعمل‌ها
- **پیام‌ها**: کوتاه، با نام کوچک، با ایموجی‌های 🌟، ✅، ✏️، 📍، 📱، 📋، 🎉. فرمت:  
  _[نام کوچک] عزیز،  
  نام شما: [نام کامل]  
  کد ملی: [کد ملی یا هنوز مانده]  
  تلفن: [تلفن با +98 یا هنوز مانده]_  
- **کیبوردها**: معمولی برای گزینه‌های ثابت، شیشه‌ای برای تصحیح/مرحله بعد. تلفن با `request_contact: true` بدون تأیید جدا.
- **JSON**: ذخیره تدریجی (`full_name`, `first_name`, `national_id`, `phone`).
- **خطاها**: کد ملی (۱۰ رقم)، تلفن (شروع با `+98`، ۱۳ کاراکتر) با پیام‌های محترمانه.
- **طراحی**: زیبا، خوانا، با فونت مناسب بله و چیدمان منظم.