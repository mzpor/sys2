
ورژن1

ربات مدیریت گروه
باتوکن 
BOT_TOKEN = "1778171143:vD6rjJXAYidLL7hQyQkBeu5TJ9KpRd4zAKegqUt3"
و فقط کتابخانه های 
import jdatetime  # برای کار با تاریخ شمسی
import requests  # برای ارتباط با API بله
import json      # برای کار با داده‌های JSON
import time     # برای کار با زمان
import re       # برای کار با عبارات منظم
import logging  # برای ثبت گزارش‌ها
import os  # برای بررسی وجود فایل
import sys
با بیس.
API_URL = f'https://tapi.bale.ai/bot{BOT_TOKEN}/getUpdates'
SEND_URL = f'https://tapi.bale.ai/bot{BOT_TOKEN}/sendMessage'
BASE_URL = f"https://tapi.bale.ai/bot{BOT_TOKEN}"  # آدرس پایه API بله
همه لوگها  انگلیسی و  گزارش  ارسال و دریافت انجام بشود. 
 اعلام برای کاربر و گروه زیبا و فارسی و مرتب شود . 
کد پایتون با نظم و کامنت فارسی باشد. 

اولین نفری که وارد ربات میشود مدیر ثبت شود
این دو کیبرد  معمولی اصلی باشه بقیه اضافه شود .
def control_keyboard():
    return {
        "keyboard": [
            [{"text": "🔁 شروع جدید"}, {"text": "🚫 خروج"}],
            [{"text": "🧹 پاک‌سازی اطلاعات"}]
        ],
        "resize_keyboard": True
    }

گزینه کانفیگ اول برنامه. قابلیت مدیر و مربی ها و کمک مربی ها سیو بشوند بعد هر اجرا همان ها باشند  
مدیر سپس با دکمه معمولی 
 شروع مجدد
 پنل کاربری 
و مدیر با کیبرد های شیشه ای اسم و فامیل را ثبت و ربات با نشان دادن اسمش  اجازه تایید میدهد و بعد 
با دکمه اجازه اپلیکیشن بله موبایل را ارسال میکند. بسیار بهینه 
در اخر شما ثبت شدید مدیر این پنل کاربری شماست. دفعات بعد مدیر وارد میشود پنل کاربری و اعلان ها را میبیند. 
اعلام تایید اخر و حالا میتوانید ربات را به گروه اضافه کنید و نام کلاس و قسمت کلاس و لینک روم  را برای مربی ها که در پنل لیست میبیند اصلاح کند . 
در پنل مدیریتی مدیر میتواند لیست کلاس  با نام و هزینه اضافه  کند و تصحیح کند  و لیست مربی و کلاس قیمت را ببیند. 
در اخر لینک گروه را برای کلاس ها ثبت میکند
به طور مثال یک  لینک گروه 
ble.ir/join/Gah9cS9LzQ
روم تست مربی


مربی وارد چت خصوصی میشود. و دکمه معمولی  مربی یا کمک مربی یا قران اموز . مربی را انتخاب میکند
شماره رندمی به مدیر میرود که مربی را تایید میکند شماره را مربی میزند به عنوان مربی ثبت میشود. 
اگر یک بار انجا شده باشد با یک فایل این ها ذخیره میشود. مربی لازم نیست کد بزند 
بعد نام و کد ملی مربی را میگیرد بهش نشون میده تایید و تصحیح با کیبرد شیشه ای میگیرد 
بعد شماره مربی با قابلیت بله با اجازه کاربر فرستاده میشود در تایید نهایی برای مدیر این ثبت فرستاده میشود 
به مربی  اعلام میکند روز حضور غیاب لیست داده میشود و گزارش ثبت میشود
مربی بدون پرداخت با لینک وارد روم میشود و مدیر او را ادمین می‌کند

کمک مربی هم همینطور 

قران اموز وارد چت خصوصی میشود. 
بعد از خوش امد گویی در خواست عضو در کانال مدرسه تلاوت رو میپذیرد ##### مثال
https://ble.ir/info
بعد از وارد کانال شدن وارد ثبت نام####
اگر عضو کانال بود نیازی نیست
بعد از ثبت نام کد ملی و وارد کردن شماره تلفن با امکان اپلیکیشن بله  و تایید حساب کاربری
  لیست کلاس انتخاب میکند و  بعد پرداخت درون برنامه ای اپلیکیشن پول پرداخت و تایید پرداخت و با لینک داده شده وارد روم میشود
#و شماره مربی و اسم و فامیل مربی را میگیرد
برای مربی و مدیر ثبت شاگردان  اعلام میشود و فرستاده میشود
مربی میتواند  در پنل خود لیست شاگردان را ببیند. 
توکن 
کلاس  مثال
CLASSES = {
    "quran_recitation": {
        "name": "رشت بری",
        "price": "1,000 تومان",
        "schedule": "شنبه‌ها و سه‌شنبه‌ها ساعت 18:00"
    },
    "tajvid": {
        "name": "جاجی زاده",
        "price": "1,000 تومان",
        "schedule": "یکشنبه‌ها و چهارشنبه‌ها ساعت 20:00"
    }
}
ولی اسم مربی با وارد شدن به ربات برای مدیر امده و پول  رو مدیر مشخص کرده 
لینک مدیر اینگونه اضافه میکند 
PAYMENT_LINKS = {
    "rasht": "ble.ir/join/Gah9cS9LzQ",
    "hajizade": "ble.ir/join/Gah9cS9LzQ"
}
برای پرداخت شاگردان اطلاعات زیر لازم است در اپلیکیشن بله
توکن مالی مدیر 
توکن پرداخت کیف پولی
PAYMENT_TOKEN = "WALLET-LIiCzxGZnCd58Obr"


به محض وارد شدن ربات به گروه اعلام میکنه برای استفاده از امکانات  مرا مدیر کنید با تشکر
def handle_new_group_join():
    send_message(chat_id, "👋 سلام! سلام بر قران اموزان عزیز 🌟")

بعد از ادمین شدن بلافاصله 
بیان تاریخ
 به فارسی روز مثلا
  شنبه
   1 
 فروردین
    WEEKDAY_MAP = {
        0: 'شنبه',
        1: 'یک‌شنبه',
        2: 'دوشنبه',
        3: 'سه‌شنبه',
        4: 'چهارشنبه',
        5: 'پنج‌شنبه',
        6: 'جمعه'
    }
فقط لیستی از قران اموزان نشان داده میشود و اعلام میشود:
برای عضویت در روم قران اموزان عزیز روی /عضو  ضربه بزنید

همجنین در خصوصی مربی : لیستی از ادمین و  قران اموزان برای مربی فرستاده  و در پنل باز یاداوری هم میشود.
 و در روم  فقط لیست قران اموزان با شماره نشان داده میشوند. 
 هر قران اموز که روی /عضو ضربه بزند لیست قران اموزان با شماره اپدیت میشود. 

#######################
با یک جیسون ساده برای دادن لیست ماهانه و سالانه   قران اموزان و ارزیابی و نظر سنجی و حضور غیاب در هر روز ذخیره میشود برای انتشار ماهانه 

کانفیگ اول کد برنامه  که قابل تغییر است:
وارد کردن ایدی مربی و کمک مربی و مدیر دستی و یا در خصوصی مشخص میشود.
 و یا مدیر یک نفر در چت خصوصی مربی و کمک مربی را مشخص میکند. 
روز تمرین قران اموز  شنبه0  دو شنبه 2
مهلت از صبح تا ساعت23 شب
روز ارزیابی مربی و کمک مربی یکشنبه1  سه شنبه 3
مهلت از 7صبح تا 16 بعد از ظهر 

روز حضور غیاب مربی از شاگردان خود در چت خصوصی 
در مدت زمانی از 7 صبح تا 14 بعد از ظهر
لیست حضور غیاب را کامل میکند
که حضور غیاب  به این شکله::
بعد هر نام شاگرد و شماره 
با چهار دکمه شیشه ای 
حاضر
حاضر(تاخیر)
غیبت
غیبت(موجه)

انتهای زمان حضور غیاب  لیست کامل نشان داده شده و برای مدیر هم ارسال میشود

وقتی روز تمرین با کپشن تمرین  قران اموز تمرین میفرستد 
ربات لیست شاگردان  را با اپدیت ارسال تمرین ها اپدیت میکند
در روم به نمایش میگذارد. لیست کسانیکه تمرین کردند
و ربات به  صوت با کپشن تمرین ریپلای میزند و یک کیبرد شیشه ای 
ارزیابی بعد از ارسال تمرین  قران اموز در روم  برای انتخاب مربی اشکار میشود. 
با گزینه های زیر
نیاز به تلاش بیشتر (پایین‌ترین سطح)
متوسط  (متوسط)
خوب (سطح سوم)
عالی (سطح چهارم)
ممتاز (بالاترین سطح)

روی این دکمه ها فقط مربی و کمک مربی میتوانند ضربه بزنند. 
 بعد از ارزیبابی مربی و یا کمک مربی 
 لیست گزارش نمره  قران اموزان اپدیت میشود
 در لیست ارزیابی قران اموزان مشخص است که توسط مربی ارزیابی شدند یا کمک مربی
 
وقتی روز ارزیابی مربی و یا کمک مربی کردند  در خصوصی برای قران اموز
  بعد از نمره مربی و یا کمک مربی
 نظر سنجی میرود 
  نظر شما نسبت به تشریح مربی عزیز از 1 تا 5 چگونه است ؟
 پنج کیبرد شیشه ای داده بشود. 
 و نتیجه برای مدیر ارسال میشود 
 به مرور این نظر سنجی ها  برای مدیر با دسته بندی مربی ها لیست میشود  و هی اپدیت میشود. 

در خصوصی برای قران اموز  ارزیابی نظر سنجی  برای بررسی کمک مربی  و یا مربی  بعد از نمره دادن میرود
 نظر شما نسبت به تشریح مربی عزیز از 1 تا 5 چگونه است ؟
 پنج کیبرد شیشه ای داده بشود. 
 نظر برای مدیر ارسال میشود

 در اخر لیست گزارش ارسال تمرین ها نمره دهی ها و نظر سنجی از مربی و کمک مربی در اختیار مدیر قرار بگیرد. 

#########
در اخر میخوام کارنامه هفته و ماه  سال 
هم به تک تک دانش اموزان داده بشه 
و هم کل کارنامه قران اموزان به مدیر داده بشه 
و هم مربیان کارنامه شاگردان خود را داشته باشند. 

ورژن2






